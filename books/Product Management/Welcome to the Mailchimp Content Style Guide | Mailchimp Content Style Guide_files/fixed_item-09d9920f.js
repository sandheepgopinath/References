(function(){window.FixedItem=function(){function t(t,i){this.top_padding=i,this.item=t,this.container=this.item.parents(".fixed_item-container"),this.min_width=this.item.data("fixed-item-min-width")||0,ScrollWatcher.register_observer(this),ResizeWatcher.register_observer(this),this._set_z_index(),this.resize_update(),$(document).on("layout",function(t){return function(){return t.resize_update()}}(this))}return t.init=function(i){return $("[data-fixed-item]").each(function(e,s){var o,n;return o=$(s),n=o.data("fixed-item-offset")?o.data("fixed-item-offset"):i,new t($(s),n)})},t.prototype.layout=function(){return console.log("FixedItem#layout"),this._is_under_min_width()||"static"===getComputedStyle(this.item[0],"::before").getPropertyValue("content").replace(/(^"|')?("|'$)?/g,"")?void this._static():(this.item.addClass("absolute"),this._unstick(),this._shim(),this.item_top=this.item.offset().top,this.item_height=this.item.outerHeight()+this.top_padding,this._window_too_short=$(window).height()<=this.item_height,this.container_bottom||this.container.length?this.container_bottom=this.container.offset().top+this.container.outerHeight():void 0)},t.prototype.resize_update=function(){return this.layout(),this.scroll_update(ScrollWatcher.last_scroll_y)},t.prototype.scroll_update=function(t){if(!this._window_too_short&&"static"!==this.state)return!this._is_under_min_width()&&t>this.item_top-this.top_padding?this.container_bottom&&this.item_height+t>=this.container_bottom?this._stick_bottom():this._stick_top():this._unstick()},t.prototype._stick_top=function(){if("stuck_top"!==this.state)return this.item.addClass("sticky").css("top",this.top_padding),this.state="stuck_top"},t.prototype._stick_bottom=function(){if("stuck_bottom"!==this.state)return this.item.removeClass("sticky").css("top","auto").css("bottom","0"),this.state="stuck_bottom"},t.prototype._unstick=function(){if("unstuck"!==this.state)return this.item.removeClass("sticky").css("top","auto").css("bottom","auto"),this.state="unstuck"},t.prototype._static=function(){if("static"!==this.state)return this._unshim(),this.item.removeClass("absolute").removeClass("sticky"),this.state="static"},t.prototype._is_under_min_width=function(){return 0!==this.min_width&&window.innerWidth<=this.min_width},t.prototype._set_z_index=function(){if(this.item.data("z-index"))return this.item.css("z-index",this.item.data("z-index"))},t.prototype._unshim=function(){return this.shim&&this.shim.remove(),this.shim=!1},t.prototype._shim=function(){if(void 0!==this.item.data("fixed-item-shim"))return this.shim||(this.shim=$("<div />"),this.shim.insertAfter(this.item)),this.shim.css("height",this.item.height()+"px")},t}(),"undefined"!=typeof ScriptLoader&&ScriptLoader.resolve("bananabin/features/fixed_item")}).call(this),function(){$(document).ready(function(){var t,i,e,s,o;for(s=document.querySelectorAll("[data-fixed-item]"),o=[],i=0,e=s.length;i<e;i++)t=s[i],o.push(function(t){var i,e;return i=$(t),e=i.data("fixed-item-offset")||$("#site-header").height(),new FixedItem(i,e)}(t));return o})}.call(this);